import{_ as f}from"./IButton.vuevuetypescriptsetuptruelang-CF-nzbvG.js";import{d as _,f as d,o as n,c as s,g as w,w as p,b as v,u as h,t as y,n as g}from"./index-C9lRJNbJ.js";import{s as m}from"./error-oUr4zJjZ.js";const k={key:0},D={key:1},B={key:0},b=_({__name:"BarcodeDetection",setup(C){const l=d("BarcodeDetector"in window),r=d(null);async function u(){try{if(!window.BarcodeDetector)throw new Error("Barcode Detection API не поддерживается");const t=new window.BarcodeDetector({formats:["qr_code"]}),e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),a=document.createElement("video");a.srcObject=e,await a.play();const i=async()=>{try{const o=await t.detect(a);o.length>0?(r.value=o[0].rawValue,e.getTracks().forEach(c=>c.stop())):requestAnimationFrame(i)}catch(o){alert(`Ошибка: ${m(o)}`),e.getTracks().forEach(c=>c.stop())}};requestAnimationFrame(i)}catch(t){alert(`Ошибка: ${m(t)}`)}}return(t,e)=>l.value?(n(),s("div",D,[w(h(f),{onClick:u},{default:p(()=>e[0]||(e[0]=[v("Сканировать QR-код")])),_:1}),r.value?(n(),s("div",B,"Обнаруженный QR-код: "+y(r.value),1)):g("",!0)])):(n(),s("div",k,"QR-сканер не поддерживается устройством"))}});export{b as default};
