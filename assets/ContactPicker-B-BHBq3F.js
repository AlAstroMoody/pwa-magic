import{i as g}from"./IButton-B4VrX7sp.js";import{d as A,n as u,o as n,c as a,g as c,f as y,w as C,b as i,u as k,a as r,F as m,p as P,t as d}from"./index-D1_ArJhU.js";import{s as w}from"./error-oUr4zJjZ.js";const I={key:0},h={key:1},x={key:2,class:"contacts-container"},j={key:0},B={key:1},$=A({__name:"ContactPicker",setup(N){const o=u("contacts"in navigator),l=u(window.location.protocol==="https:"||window.location.hostname==="localhost"),v=u(null),p=u(null);async function f(){if(!o.value)return!1;try{const e=await navigator.permissions.query({name:"contacts"});return e.state==="granted"||e.state==="prompt"}catch{return!1}}async function S(){if(!o.value){alert("Contacts API не поддерживается этим браузером.");return}if(!l.value){alert("Для работы Contacts API требуется HTTPS или localhost.");return}if(!await f()){alert("Доступ к контактам не разрешён.");return}try{const t=await navigator.contacts.getProperties();p.value=t,alert(`Поддерживаемые свойства: ${t.join(", ")}`)}catch(e){alert(`Ошибка: ${w(e)}`)}}async function b(){if(!o.value){alert("Contacts API не поддерживается этим браузером.");return}if(!l.value){alert("Для работы Contacts API требуется HTTPS или localhost.");return}if(!await f()){alert("Доступ к контактам не разрешён.");return}try{const e=await navigator.contacts.select(["name","tel","email"],{multiple:!0});if(!e.length){alert("Контакты не выбраны.");return}v.value=e}catch(e){alert(`Ошибка: ${w(e)}`)}}return(e,t)=>(n(),a(m,null,[l.value?o.value?c("",!0):(n(),a("div",h,"Contacts API не поддерживается этим браузером")):(n(),a("div",I,"Для работы Contacts API требуется HTTPS или localhost")),o.value&&l.value?(n(),a("div",x,[y(k(g),{onClick:S,disabled:!o.value||!l.value},{default:C(()=>t[0]||(t[0]=[i(" Проверить поддерживаемые свойства ")])),_:1},8,["disabled"]),y(k(g),{onClick:b,disabled:!o.value||!l.value},{default:C(()=>t[1]||(t[1]=[i(" Выбрать контакты ")])),_:1},8,["disabled"]),p.value?(n(),a("div",j,[t[2]||(t[2]=r("h3",null,"Поддерживаемые свойства:",-1)),r("ul",null,[(n(!0),a(m,null,P(p.value,s=>(n(),a("li",{key:s},d(s),1))),128))])])):c("",!0),v.value?(n(),a("div",B,[t[8]||(t[8]=r("h3",null,"Выбранные контакты:",-1)),r("ul",null,[(n(!0),a(m,null,P(v.value,(s,T)=>(n(),a("li",{key:T},[t[3]||(t[3]=r("strong",null,"Имя:",-1)),i(" "+d(s.name.join(", ")||"Не указано"),1),t[4]||(t[4]=r("br",null,null,-1)),t[5]||(t[5]=r("strong",null,"Телефон:",-1)),i(" "+d(s.tel.join(", ")||"Не указано"),1),t[6]||(t[6]=r("br",null,null,-1)),t[7]||(t[7]=r("strong",null,"Email:",-1)),i(" "+d(s.email.join(", ")||"Не указано"),1)]))),128))])])):c("",!0)])):c("",!0)],64))}});export{$ as default};
