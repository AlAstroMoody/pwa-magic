import{_ as g}from"./IButton.vuevuetypescriptsetuptruelang-DdUhpapL.js";import{d as _,f as u,o as n,c as a,n as c,g as y,w as C,b as i,u as k,a as r,F as m,p as P,t as d}from"./index-CXIZxYj5.js";import{s as w}from"./error-oUr4zJjZ.js";const A={key:0},I={key:1},h={key:2,class:"api-content__wrapper"},x={key:0},j={key:1},E=_({__name:"ContactPicker",setup(N){const l=u("contacts"in navigator),o=u(window.location.protocol==="https:"||window.location.hostname==="localhost"),p=u(null),v=u(null);async function f(){if(!l.value)return!1;try{const e=await navigator.permissions.query({name:"contacts"});return e.state==="granted"||e.state==="prompt"}catch{return!1}}async function S(){if(!l.value){alert("Contacts API не поддерживается этим браузером.");return}if(!o.value){alert("Для работы Contacts API требуется HTTPS или localhost.");return}if(!await f()){alert("Доступ к контактам не разрешён.");return}try{const t=await navigator.contacts.getProperties();v.value=t,alert(`Поддерживаемые свойства: ${t.join(", ")}`)}catch(e){alert(`Ошибка: ${w(e)}`)}}async function b(){if(!l.value){alert("Contacts API не поддерживается этим браузером.");return}if(!o.value){alert("Для работы Contacts API требуется HTTPS или localhost.");return}if(!await f()){alert("Доступ к контактам не разрешён.");return}try{const e=await navigator.contacts.select(["name","tel","email"],{multiple:!0});if(!e.length){alert("Контакты не выбраны.");return}p.value=e}catch(e){alert(`Ошибка: ${w(e)}`)}}return(e,t)=>(n(),a(m,null,[o.value?l.value?c("",!0):(n(),a("div",I,"Contacts API не поддерживается этим браузером")):(n(),a("div",A,"Для работы Contacts API требуется HTTPS или localhost")),l.value&&o.value?(n(),a("div",h,[y(k(g),{onClick:S,disabled:!l.value||!o.value},{default:C(()=>t[0]||(t[0]=[i(" Проверить поддерживаемые свойства ")])),_:1},8,["disabled"]),y(k(g),{onClick:b,disabled:!l.value||!o.value},{default:C(()=>t[1]||(t[1]=[i(" Выбрать контакты ")])),_:1},8,["disabled"]),v.value?(n(),a("div",x,[t[2]||(t[2]=r("h3",null,"Поддерживаемые свойства:",-1)),r("ul",null,[(n(!0),a(m,null,P(v.value,s=>(n(),a("li",{key:s},d(s),1))),128))])])):c("",!0),p.value?(n(),a("div",j,[t[8]||(t[8]=r("h3",null,"Выбранные контакты:",-1)),r("ul",null,[(n(!0),a(m,null,P(p.value,(s,T)=>(n(),a("li",{key:T},[t[3]||(t[3]=r("strong",null,"Имя:",-1)),i(" "+d(s.name.join(", ")||"Не указано"),1),t[4]||(t[4]=r("br",null,null,-1)),t[5]||(t[5]=r("strong",null,"Телефон:",-1)),i(" "+d(s.tel.join(", ")||"Не указано"),1),t[6]||(t[6]=r("br",null,null,-1)),t[7]||(t[7]=r("strong",null,"Email:",-1)),i(" "+d(s.email.join(", ")||"Не указано"),1)]))),128))])])):c("",!0)])):c("",!0)],64))}});export{E as default};
