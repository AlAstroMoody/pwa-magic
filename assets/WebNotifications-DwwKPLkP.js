import{_ as d}from"./IButton.vuevuetypescriptsetuptruelang-B7VYBoNl.js";import{d as _,f as r,A as w,o as s,c as l,t as N,b as u,a as n,n as P,g as c,w as f,u as v,F as b}from"./index-BBe7Pzt6.js";import{s as p}from"./error-oUr4zJjZ.js";const y={key:0},k={key:1},A={class:"api-content__wrapper"},V=_({__name:"WebNotifications",setup(h){const o=r(!1),e=r("default"),a=r(!1);w(()=>{o.value="Notification"in window,e.value=Notification.permission,a.value=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)});async function m(){if(!o.value){alert(a.value?"Мобильные браузеры требуют установки PWA для уведомлений":"Notifications API не поддерживается");return}try{e.value=await Notification.requestPermission(),e.value==="granted"&&a.value&&alert("Для мобильных уведомлений может потребоваться установка PWA")}catch(i){alert(`Ошибка: ${p(i)}`)}}function g(){if(!o.value||e.value!=="granted"){alert("Уведомления не разрешены");return}try{"serviceWorker"in navigator&&a.value?navigator.serviceWorker.ready.then(i=>{i.showNotification("Ня!",{body:"Это тестовое уведомление",icon:"/pwa-magic/favicons/favicon-32x32.png"})}):new Notification("Ня!",{body:"Это тестовое уведомление",icon:"/pwa-magic/favicons/favicon-32x32.png"})}catch(i){alert(`Ошибка: ${p(i)}`)}}return(i,t)=>(s(),l(b,null,[o.value?a.value?(s(),l("div",k,t[0]||(t[0]=[u(" Для работы уведомлений на мобильном устройстве: "),n("ul",null,[n("li",null,"Установите приложение как PWA"),n("li",null,"Разрешите уведомления в настройках браузера")],-1)]))):P("",!0):(s(),l("div",y,N(a.value?"Ваш мобильный браузер не поддерживает уведомления":"API не поддерживается"),1)),n("div",A,[c(v(d),{onClick:m,disabled:e.value==="granted"},{default:f(()=>t[1]||(t[1]=[u(" Запросить разрешение ")])),_:1},8,["disabled"]),c(v(d),{onClick:g,disabled:e.value!=="granted"},{default:f(()=>t[2]||(t[2]=[u(" Показать уведомление ")])),_:1},8,["disabled"])])],64))}});export{V as default};
